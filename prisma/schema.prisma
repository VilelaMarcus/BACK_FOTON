generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User{
  @@map(name: "users")

  id String  @id @default(uuid())
  name String  @db.VarChar(255)
  email String 
  verified Boolean? @default(false) 
  role String
  password String
}


model Customer{
  id String  @id @default(uuid())
  custumer_name       String?  
  owner               String? 
  email               String?
  logoUrl             String?
  address             String?
  city                String?
  zip_code            String?
  
  laserOfCustomer   LaserOfCustomer[]
}


model Laser{
  id String  @id @default(uuid())
  laser_name String  @db.VarChar(255) @unique
  brand String

  laserOfCustomer   LaserOfCustomer[]
}


model LaserOfCustomer{
  id String     @id @default(uuid())
  laser_id       String
  customer_id    String
  customerVisitMeasurements CustomerVisitMeasurement[] 


  laser Laser @relation(fields: [laser_id], references: [id])
  custumer Customer @relation(fields: [customer_id], references: [id])
}


model CustomerVisitMeasurement{
  id                  String  @id @default(uuid())
  date                String?
  unresolvedDefect    String?
  oph                 String?
  surgery             String?
  arf                 String?
  arfChange           String?
  changeNr            String?
  v1                  String?
  v2                  String?
  energy              String?
  e1g                 String?
  e100                String?
  e1                  String?
  hom                 String?
  mirrow45p1          String?
  mirrow45p2          String?
  foco1               String?
  foco2               String?
  e4                  String?
  main                String?
  galvos              GalvoStatus?
  head                String?
  oc                  String?
  hr                  String?
  tecnic              String?
  servicePerformed    String?
  observation         String?


  he                  String?
  halogen             String?
  water               String?
  fill                String?
  trans               String?
  arfPorcentage       String?
  spliter             String?
  m1                  String?
  m2                  String?
  m3                  String?
  l2                  String?
  l3                  String?
  integrator          String?
  motor               String?

  cavity              String?
  bs                  String?
  focus               String?
  aten                String?
  mirrow45            String?
  eletronics          String?

  useHours            String?
  lampadHours         String?

  osc                 String?
  amp                 String?
  powerAmp            String?
  powerOsc            String?
  pumpings            String?


  laser_of_customer_id  String

  laserOfCustomer  LaserOfCustomer @relation(fields: [laser_of_customer_id], references: [id])
}

enum GalvoStatus {
  OK
  MEDIO
  RUIM
}
